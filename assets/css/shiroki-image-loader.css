/* ğŸ¨ Shirokiå›¾ç‰‡åŠ è½½ä¼˜åŒ–æ ·å¼ */

/* ğŸŒŸ åŸºç¡€å›¾ç‰‡å®¹å™¨æ ·å¼ */
.shiroki-image-container {
    position: relative;
    overflow: hidden;
    background: transparent;
}

/* ğŸ­ å›¾ç‰‡å ä½ç¬¦åŠ¨ç”» */
.shiroki-image-placeholder {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--bs-light, #f8f9fa);
    z-index: 1;
    border-radius: inherit;
}

/* ğŸŒ† æš—è‰²æ¨¡å¼å ä½ç¬¦ */
[data-bs-theme="dark"] .shiroki-image-placeholder {
    background: var(--bs-dark, #1a1a1a);
}

/* âœ¨ å ä½ç¬¦æ¶ˆå¤±åŠ¨ç”» */
.shiroki-image-placeholder.loaded {
    opacity: 0;
    transition: opacity 0.4s ease-out;
    pointer-events: none;
}

/* ğŸ¯ Bannerå›¾ç‰‡ç‰¹æ®Šæ•ˆæœ */
.boxmoe_header_banner_img img {
    opacity: 0;
    transform: scale(0.9) translateY(10px);
    transition: all 1.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    filter: blur(12px);
    will-change: transform, opacity, filter;
}

.boxmoe_header_banner_img img.loaded {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0);
}

/* ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 768px) {
    .boxmoe_header_banner_img img {
        transition-duration: 1s;
        transform: scale(0.95) translateY(5px);
    }
}

/* ğŸ–¼ï¸ æ–‡ç« å°é¢å›¾ç‰‡æ•ˆæœ */
.post-list-img img {
    opacity: 0;
    transform: scale(0.92) translateY(8px);
    transition: all 0.9s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    filter: blur(8px);
    will-change: transform, opacity, filter;
}

.post-list-img img.loaded {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0);
}

/* ğŸ¨ æ‡’åŠ è½½å›¾ç‰‡æ•ˆæœ */
img.lazy {
    opacity: 0;
    transform: scale(0.88) translateY(12px);
    transition: all 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    filter: blur(6px);
    will-change: transform, opacity, filter;
}

img.lazy.loaded {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0);
}

/* âš¡ é«˜æ€§èƒ½æ¨¡å¼ */
@media (prefers-reduced-motion: reduce) {
    .shiroki-image-placeholder,
    .boxmoe_header_banner_img img,
    .post-list-img img,
    img.lazy {
        animation: none;
        transition: opacity 0.3s ease;
    }
    
    .boxmoe_header_banner_img img {
        transform: scale(1);
        filter: blur(0);
    }
    
    .post-list-img img,
    img.lazy {
        transform: scale(1);
        filter: blur(0);
    }
}

/* ğŸŒˆ ç‰¹æ®Šæ•ˆæœï¼šå½©è‰²è¾¹æ¡† */
.shiroki-image-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
        45deg,
        rgba(114, 229, 244, 0.1),
        rgba(60, 89, 251, 0.1),
        rgba(218, 234, 255, 0.1)
    );
    z-index: 2;
    opacity: 0;
    transition: opacity 0.6s ease;
    pointer-events: none;
}

.shiroki-image-container.loaded::before {
    opacity: 1;
}

/* ğŸ¯ åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨ */
.shiroki-loading-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 40px;
    height: 40px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-top: 3px solid var(--bs-primary, #007bff);
    border-radius: 50%;
    animation: shiroki-spin 1s linear infinite;
    z-index: 3;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.shiroki-image-container.loading .shiroki-loading-indicator {
    opacity: 1;
}

@keyframes shiroki-spin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* ğŸ“Š æ€§èƒ½ä¼˜åŒ–ç±» */
.shiroki-optimize-performance {
    contain: layout style paint;
    content-visibility: auto;
}

/* ğŸ­ é”™è¯¯çŠ¶æ€å¤„ç† */
img.shiroki-error {
    filter: grayscale(100%) blur(2px);
    opacity: 0.7;
}

.shiroki-error-placeholder {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: var(--bs-gray-500, #6c757d);
    font-size: 14px;
    z-index: 4;
}

/* ğŸ¨ å“åº”å¼ä¼˜åŒ– */
@media (max-width: 576px) {
    .shiroki-image-placeholder {
        animation-duration: 1.5s;
    }
    
    .post-list-img img {
        transition-duration: 0.6s;
        transform: scale(0.95) translateY(5px);
    }
    
    img.lazy {
        transition-duration: 0.5s;
        transform: scale(0.9) translateY(8px);
    }
}

/* ğŸŒŸ æ‚¬åœæ•ˆæœå¢å¼º */
.shiroki-image-container:hover img.loaded {
    transform: scale(1.02);
    transition: transform 0.3s ease;
}

/* ğŸ¨ ä¸»é¢˜è‰²é€‚é… */
:root {
    --shiroki-primary: #007bff;
    --shiroki-secondary: #6c757d;
    --shiroki-success: #28a745;
    --shiroki-info: #17a2b8;
    --shiroki-warning: #ffc107;
    --shiroki-danger: #dc3545;
    --shiroki-light: #f8f9fa;
    --shiroki-dark: #343a40;
}

/* ğŸŒ† æš—è‰²æ¨¡å¼å®Œæ•´é€‚é… */
[data-bs-theme="dark"] {
    --shiroki-primary: #0d6efd;
    --shiroki-secondary: #6c757d;
    --shiroki-success: #198754;
    --shiroki-info: #0dcaf0;
    --shiroki-warning: #ffc107;
    --shiroki-danger: #dc3545;
    --shiroki-light: #f8f9fa;
    --shiroki-dark: #212529;
}

/* ğŸ¯ æœ€ç»ˆä¼˜åŒ–ï¼šç¡¬ä»¶åŠ é€Ÿ */
.shiroki-image-container,
.boxmoe_header_banner_img,
.post-list-img,
img {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
}